{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-video.js"],"sourcesContent":["import Player from '@vimeo/player';\nimport throttle from 'lodash.throttle';\n\nconst LS_PLAYBACK_TIME_KEY = 'videoplayer-current-time';\nconst playerTimeUpdateInterval = 1000;\n\nconst iframe = document.querySelector('#vimeo-player');\nconst player = new Player(iframe);\n\ntrySetPlayerCurrentTime();\n\nplayer.on('timeupdate', throttle(onPlayerTimeUpdate, playerTimeUpdateInterval));\n\nfunction onPlayerTimeUpdate(data) {\n  localStorage.setItem(LS_PLAYBACK_TIME_KEY, JSON.stringify(data.seconds));\n}\n\nfunction trySetPlayerCurrentTime() {\n  const currentPlaybackTime = localStorage.getItem(LS_PLAYBACK_TIME_KEY);\n  if (currentPlaybackTime) {\n    const parsedPlaybackTime = Number(JSON.parse(currentPlaybackTime));\n\n    player.getDuration().then(function (duration) {\n      if (parsedPlaybackTime < duration) {\n        player.setCurrentTime(parsedPlaybackTime).then(function (seconds) {\n          console.log(\n            `the actual time that the player seeked to: ${seconds} seconds`\n          );\n\n          player.play().catch(function (error) {\n            console.log(`resume playback error: ${error}`);\n          });\n        });\n      }\n    });\n  }\n}\n"],"names":["LS_PLAYBACK_TIME_KEY","playerTimeUpdateInterval","iframe","player","Player","trySetPlayerCurrentTime","throttle","onPlayerTimeUpdate","data","currentPlaybackTime","parsedPlaybackTime","duration","seconds","error"],"mappings":"+IAGA,MAAMA,EAAuB,2BACvBC,EAA2B,IAE3BC,EAAS,SAAS,cAAc,eAAe,EAC/CC,EAAS,IAAIC,EAAOF,CAAM,EAEhCG,IAEAF,EAAO,GAAG,aAAcG,EAASC,EAAoBN,CAAwB,CAAC,EAE9E,SAASM,EAAmBC,EAAM,CAChC,aAAa,QAAQR,EAAsB,KAAK,UAAUQ,EAAK,OAAO,CAAC,CACzE,CAEA,SAASH,GAA0B,CACjC,MAAMI,EAAsB,aAAa,QAAQT,CAAoB,EACrE,GAAIS,EAAqB,CACvB,MAAMC,EAAqB,OAAO,KAAK,MAAMD,CAAmB,CAAC,EAEjEN,EAAO,YAAW,EAAG,KAAK,SAAUQ,EAAU,CACxCD,EAAqBC,GACvBR,EAAO,eAAeO,CAAkB,EAAE,KAAK,SAAUE,EAAS,CAChE,QAAQ,IACN,8CAA8CA,WAC1D,EAEUT,EAAO,KAAI,EAAG,MAAM,SAAUU,EAAO,CACnC,QAAQ,IAAI,0BAA0BA,GAAO,CACzD,CAAW,CACX,CAAS,CAET,CAAK,CACF,CACH"}