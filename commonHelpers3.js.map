{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst LS_FEEDBACK_FORM_STATE_KEY = 'feedback-form-state';\nconst saveStateInterval = 500;\n\nconst feedbackForm = document.querySelector('.feedback-form');\n\nconst feedbackFormState = loadFeedbackFormState();\n\nfeedbackForm.addEventListener(\n  'input',\n  throttle(onFeedbackFormInput, saveStateInterval)\n);\nfeedbackForm.addEventListener('submit', onFeedbackFormSubmit);\n\nfunction loadFeedbackFormState() {\n  const feedbackFormState = localStorage.getItem(LS_FEEDBACK_FORM_STATE_KEY);\n\n  if (feedbackFormState) {\n    const parsedFeedbackFormState = JSON.parse(feedbackFormState);\n\n    feedbackForm.email.value = parsedFeedbackFormState.email;\n    feedbackForm.message.value = parsedFeedbackFormState.message;\n    return parsedFeedbackFormState;\n  }\n\n  return {\n    email: '',\n    message: '',\n  };\n}\n\nfunction onFeedbackFormInput() {\n  feedbackFormState.email = feedbackForm.email.value;\n  feedbackFormState.message = feedbackForm.message.value;\n\n  localStorage.setItem(\n    LS_FEEDBACK_FORM_STATE_KEY,\n    JSON.stringify(feedbackFormState)\n  );\n}\n\nfunction onFeedbackFormSubmit(event) {\n  event.preventDefault();\n\n  feedbackFormState.email = feedbackForm.email.value;\n  feedbackFormState.message = feedbackForm.message.value;\n\n  console.log(`Feedback Form Submit: ${JSON.stringify(feedbackFormState)}`);\n\n  localStorage.removeItem(LS_FEEDBACK_FORM_STATE_KEY);\n  feedbackForm.reset();\n}\n"],"names":["LS_FEEDBACK_FORM_STATE_KEY","saveStateInterval","feedbackForm","feedbackFormState","loadFeedbackFormState","throttle","onFeedbackFormInput","onFeedbackFormSubmit","parsedFeedbackFormState","event"],"mappings":"wIAEA,MAAMA,EAA6B,sBAC7BC,EAAoB,IAEpBC,EAAe,SAAS,cAAc,gBAAgB,EAEtDC,EAAoBC,EAAqB,EAE/CF,EAAa,iBACX,QACAG,EAASC,EAAqBL,CAAiB,CACjD,EACAC,EAAa,iBAAiB,SAAUK,CAAoB,EAE5D,SAASH,GAAwB,CAC/B,MAAMD,EAAoB,aAAa,QAAQH,CAA0B,EAEzE,GAAIG,EAAmB,CACrB,MAAMK,EAA0B,KAAK,MAAML,CAAiB,EAE5D,OAAAD,EAAa,MAAM,MAAQM,EAAwB,MACnDN,EAAa,QAAQ,MAAQM,EAAwB,QAC9CA,CACR,CAED,MAAO,CACL,MAAO,GACP,QAAS,EACb,CACA,CAEA,SAASF,GAAsB,CAC7BH,EAAkB,MAAQD,EAAa,MAAM,MAC7CC,EAAkB,QAAUD,EAAa,QAAQ,MAEjD,aAAa,QACXF,EACA,KAAK,UAAUG,CAAiB,CACpC,CACA,CAEA,SAASI,EAAqBE,EAAO,CACnCA,EAAM,eAAc,EAEpBN,EAAkB,MAAQD,EAAa,MAAM,MAC7CC,EAAkB,QAAUD,EAAa,QAAQ,MAEjD,QAAQ,IAAI,yBAAyB,KAAK,UAAUC,CAAiB,GAAG,EAExE,aAAa,WAAWH,CAA0B,EAClDE,EAAa,MAAK,CACpB"}